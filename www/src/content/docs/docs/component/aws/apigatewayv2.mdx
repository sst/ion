---
title: ApiGatewayV2
description: Reference doc for the `sst.aws.ApiGatewayV2` component.
---

{/* DO NOT EDIT. AUTO-GENERATED FROM "pkg/platform/src/components/aws/apigatewayv2.ts" */}

import Segment from '../../../../../../src/components/tsdoc/Segment.astro';
import Section from '../../../../../../src/components/tsdoc/Section.astro';
import NestedTitle from '../../../../../../src/components/tsdoc/NestedTitle.astro';
import InlineSection from '../../../../../../src/components/tsdoc/InlineSection.astro';

<div class="tsdoc">

<Section type="about">
The `ApiGatewayV2` component lets you add an [Amazon API Gateway HTTP API](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api.html) to your app.

#### Create the API

```ts
const api = new sst.aws.ApiGatewayV2("MyApi");
```

#### Add a custom domain

```js {2}
new sst.aws.ApiGatewayV2("MyApi", {
  domain: "api.example.com"
});
```

#### Add routes

```ts
api.route("GET /", "src/get.handler");
api.route("POST /", "src/post.handler");
```

#### Configure the routes

You can configure the route and its handler function.

```ts
api.route("GET /", "src/get.handler", { auth: { iam: true } });
api.route("POST /", { handler: "src/post.handler", memory: "2048 MB" });
```

#### Set defaults for all routes

You can use the `transform` to set some defaults for all your routes. For example,
instead of setting the `memory` for each route.

```ts
api.route("GET /", { handler: "src/get.handler", memory: "2048 MB" });
api.route("POST /", { handler: "src/post.handler", memory: "2048 MB" });
```

You can set it through the `transform`.

```ts {5}
new sst.aws.ApiGatewayV2("MyApi", {
  transform: {
    route: {
      handler: {
        memory: "2048 MB"
      }
    }
  }
});

api.route("GET /", "src/get.handler");
api.route("POST /", "src/post.handler");
```
</Section>

---

## Constructor

<Segment>
<Section type="signature">
```ts
new ApiGatewayV2(name, args?, opts?)
```
</Section>

<Section type="parameters">
#### Parameters
- <p><code class="key">name</code> <code class="primitive">string</code></p>
- <p><code class="key">args?</code> [<code class="type">ApiGatewayV2Args</code>](#apigatewayv2args)</p>
- <p><code class="key">opts?</code> [<code class="type">ComponentResourceOptions</code>](https://www.pulumi.com/docs/concepts/options/)</p>
</Section>
</Segment>

## ApiGatewayV2Args
### accessLog?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">retention?</code>](#accesslog-retention)</p>
</Section>

<InlineSection>
**Default** <code class="primitive">&lcub;retention: "forever"&rcub;</code>
</InlineSection>
Configure the [API Gateway logs](https://docs.aws.amazon.com/apigateway/latest/developerguide/view-cloudwatch-log-events-in-cloudwatch-console.html) in CloudWatch. By default, access logs are enabled and kept forever.

```js
{
  accessLog: {
    retention: "1 week"
  }
}
```
</Segment>
<NestedTitle id="accesslog-retention" Tag="h4" parent="accessLog.">retention?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">1 day</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">3 days</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">5 days</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">1 week</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">2 weeks</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">1 month</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">2 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">3 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">4 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">5 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">6 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">1 year</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">13 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">18 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">2 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">3 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">5 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">6 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">7 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">8 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">9 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">10 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">forever</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">forever</code>
</InlineSection>
The duration the API Gateway logs are kept in CloudWatch.

</Segment>
### domain?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol"> | </code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">cert?</code>](#domain-cert)</p>
- <p>[<code class="key">dns?</code>](#domain-dns)</p>
- <p>[<code class="key">name</code>](#domain-name)</p>
- <p>[<code class="key">path?</code>](#domain-path)</p>
</Section>
Set a custom domain for your HTTP API.

Automatically manages domains hosted on AWS Route 53, Cloudflare, and Vercel. For other
providers, you'll need to pass in a `cert` that validates domain ownership and add the
DNS records.

:::tip
Built-in support for AWS Route 53, Cloudflare, and Vercel. And manual setup for other
providers.
:::

By default this assumes the domain is hosted on Route 53.

```js
{
  domain: "example.com"
}
```

For domains hosted on Cloudflare.

```js
{
  domain: {
    name: "example.com",
    dns: sst.cloudflare.dns()
  }
}
```
</Segment>
<NestedTitle id="domain-cert" Tag="h4" parent="domain.">cert?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The ARN of an ACM (AWS Certificate Manager) certificate that proves ownership of the
domain. By default, a certificate is created and validated automatically.

:::tip
You need to pass in a `cert` for domains that are not hosted on supported `dns` providers.
:::

To manually set up a domain on an unsupported provider, you'll need to:

1. [Validate that you own the domain](https://docs.aws.amazon.com/acm/latest/userguide/domain-ownership-validation.html) by creating an ACM certificate. You can either validate it by setting a DNS record or by verifying an email sent to the domain owner.
2. Once validated, set the certificate ARN as the `cert` and set `dns` to `false`.
3. Add the DNS records in your provider to point to the API Gateway URL.

```js
{
  domain: {
    name: "example.com",
    dns: false,
    cert: "arn:aws:acm:us-east-1:112233445566:certificate/3a958790-8878-4cdc-a396-06d95064cf63"
  }
}
```
</Segment>
<NestedTitle id="domain-dns" Tag="h4" parent="domain.">dns?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">false</code><code class="symbol"> | </code>[<code class="type">sst.aws.dns</code>](/docs/component/aws/dns/)<code class="symbol"> | </code>[<code class="type">sst.cloudflare.dns</code>](/docs/component/cloudflare/dns/)<code class="symbol"> | </code>[<code class="type">sst.vercel.dns</code>](/docs/component/vercel/dns/)<code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">sst.aws.dns</code>
</InlineSection>
The DNS provider to use for the domain. Defaults to the AWS.

Takes an adapter that can create the DNS records on the provider. This can automate
validating the domain and setting up the DNS routing.

Supports Route 53, Cloudflare, and Vercel adapters. For other providers, you'll need
to set `dns` to `false` and pass in a certificate validating ownership via `cert`.

Specify the hosted zone ID for the Route 53 domain.

```js
{
  domain: {
    name: "example.com",
    dns: sst.aws.dns({
      zone: "Z2FDTNDATAQYW2"
    })
  }
}
```

Use a domain hosted on Cloudflare, needs the Cloudflare provider.

```js
{
  domain: {
    name: "example.com",
    dns: sst.cloudflare.dns()
  }
}
```

Use a domain hosted on Vercel, needs the Vercel provider.

```js
{
  domain: {
    name: "example.com",
    dns: sst.vercel.dns()
  }
}
```
</Segment>
<NestedTitle id="domain-name" Tag="h4" parent="domain.">name</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The custom domain you want to use.

```js
{
  domain: {
    name: "example.com"
  }
}
```

Can also include subdomains based on the current stage.

```js
{
  domain: {
    name: `${$app.stage}.example.com`
  }
}
```
</Segment>
<NestedTitle id="domain-path" Tag="h4" parent="domain.">path?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The base mapping for the custom domain. This adds a suffix to the URL of the API.

Given the following base path and domain name.

```js
{
  domain: {
    name: "api.example.com",
    path: "v1"
  }
}
```

The full URL of the API will be `https://api.example.com/v1/`.

:::note
There's an extra trailing slash when a base path is set.
:::

Be default there is no base path, so if the `name` is `api.example.com`, the full URL will be `https://api.example.com`.
</Segment>
### transform?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">accessLog?</code>](#transform-accesslog)</p>
- <p>[<code class="key">api?</code>](#transform-api)</p>
- <p>[<code class="key">domainName?</code>](#transform-domainname)</p>
- <p>[<code class="key">route?</code>](#transform-route) <code class="primitive">Object</code></p>
  - <p>[<code class="key">args?</code>](#transform-route-args)</p>
  - <p>[<code class="key">handler?</code>](#transform-route-handler)</p>
- <p>[<code class="key">stage?</code>](#transform-stage)</p>
</Section>
[Transform](/docs/components#transform) how this component creates its underlying
resources.

</Segment>
<NestedTitle id="transform-accesslog" Tag="h4" parent="transform.">accessLog?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">LogGroupArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cloudwatch/loggroup/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">LogGroupArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cloudwatch/loggroup/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the CloudWatch LogGroup resource used for access logs.

</Segment>
<NestedTitle id="transform-api" Tag="h4" parent="transform.">api?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">ApiArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/api/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">ApiArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/api/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the API Gateway HTTP API resource.

</Segment>
<NestedTitle id="transform-domainname" Tag="h4" parent="transform.">domainName?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">DomainNameArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/domainname/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">DomainNameArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/domainname/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the API Gateway HTTP API domain name resource.

</Segment>
<NestedTitle id="transform-route" Tag="h4" parent="transform.">route?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
</Section>
Transform the routes. This is called for every route that is added.

:::note
This is applied right before the resource is created. So it overrides the
props set by the route.
:::

You can use this to set any common props for all the routes and their handler function.
Like the other transforms, you can either pass in an object or a callback.

Here we are ensuring that all handler functions of our routes have a memory of `2048 MB`.

```js
{
  transform: {
    route: {
      handler: {
        memory: "2048 MB"
      },
    }
  }
}
```

Enable IAM auth for all our routes.

```js
{
  transform: {
    route: {
      args: (props) => {
        props.auth = { iam: true };
      }
    }
  }
}
```
</Segment>
<NestedTitle id="transform-route-args" Tag="h5" parent="transform.route.">args?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">ApiGatewayV2RouteArgs</code>](#apigatewayv2routeargs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">ApiGatewayV2RouteArgs</code>](#apigatewayv2routeargs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the arguments for the route.

</Segment>
<NestedTitle id="transform-route-handler" Tag="h5" parent="transform.route.">handler?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the handler function of the route.

</Segment>
<NestedTitle id="transform-stage" Tag="h4" parent="transform.">stage?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">StageArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/stage/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">StageArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/stage/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the API Gateway HTTP API stage resource.

</Segment>

## Properties

### nodes
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">api</code>](#nodes-api)</p>
- <p>[<code class="key">logGroup</code>](#nodes-loggroup)</p>
</Section>
The underlying [resources](/docs/components/#nodes) this component creates.
</Segment>
<NestedTitle id="nodes-api" Tag="h4" parent="nodes.">api</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">Api</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/api/)
</InlineSection>
</Section>
The Amazon API Gateway HTTP API
</Segment>
<NestedTitle id="nodes-loggroup" Tag="h4" parent="nodes.">logGroup</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">LogGroup</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cloudwatch/loggroup/)
</InlineSection>
</Section>
The CloudWatch LogGroup for the access logs.
</Segment>

### url
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Output</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The URL of the API.

If the `domain` is set, this is the URL with the custom domain.
Otherwise, it's the autogenerated API Gateway URL.
</Segment>

## SDK

The following are accessible through the [SDK](/docs/reference/sdk/) at runtime.

### Links
<Segment>
<Section type="parameters">
- <p><code class="key">url</code> <code class="primitive">string</code></p>
The URL of the API.

If the `domain` is set, this is the URL with the custom domain.
Otherwise, it's the autogenerated API Gateway URL.
</Section>
</Segment>

## Methods

### addAuthorizer
<Segment>
<Section type="signature">
```ts
addAuthorizer(args)
```
</Section>

<Section type="parameters">
#### Parameters
- <p><code class="key">args</code> [<code class="type">ApiGatewayV2AuthorizerArgs</code>](#apigatewayv2authorizerargs)</p>
Configure the authorizer.
</Section>

<InlineSection>
**Returns** [<code class="type">ApiGatewayV2Authorizer</code>](/docs/component/aws/apigatewayv2-authorizer/)
</InlineSection>
Add an authorizer to the API Gateway HTTP API.

Here's how you add a JWT authorizer.

```js
api.addAuthorizer({
  name: "myAuthorizer",
  jwt: {
    issuer: "https://issuer.com/",
    audiences: ["https://api.example.com"],
    identitySource: "$request.header.AccessToken"
  }
});
```
</Segment>

### route
<Segment>
<Section type="signature">
```ts
route(route, handler, args?)
```
</Section>

<Section type="parameters">
#### Parameters
- <p><code class="key">route</code> <code class="primitive">string</code></p>
The path for the route.
- <p><code class="key">handler</code> <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)</p>
The function that'll be invoked.
- <p><code class="key">args?</code> [<code class="type">ApiGatewayV2RouteArgs</code>](#apigatewayv2routeargs)</p>
Configure the route.
</Section>

<InlineSection>
**Returns** [<code class="type">ApiGatewayV2LambdaRoute</code>](/docs/component/aws/apigatewayv2-lambda-route/)
</InlineSection>
Add a route to the API Gateway HTTP API. The route is a combination of
- An HTTP method and a path, `{METHOD} /{path}`.
- Or a `$default` route.

:::tip
The `$default` route is a default or catch-all route. It'll match if no other route matches.
:::

A method could be one of `GET`, `POST`, `PUT`, `DELETE`, `PATCH`, `HEAD`, `OPTIONS`, or `ANY`. Here `ANY` matches any HTTP method.

The path can be a combination of
- Literal segments, `/notes`, `/notes/new`, etc.
- Parameter segments, `/notes/{noteId}`, `/notes/{noteId}/attachments/{attachmentId}`, etc.
- Greedy segments, `/{proxy+}`, `/notes/{proxy+}`,  etc. The `{proxy+}` segment is a greedy segment that matches all child paths. It needs to be at the end of the path.

:::tip
The `{proxy+}` is a greedy segment, it matches all its child paths.
:::

The `$default` is a reserved keyword for the default route. It'll be matched if no other route matches.

:::note
You cannot have duplicate routes.
:::

When a request comes in, the API Gateway will look for the most specific match. If no route matches, the `$default` route will be invoked.

Here's how you add a simple route.

```js
api.route("GET /", "src/get.handler");
```

Match any HTTP method.

```js
api.route("ANY /", "src/route.handler");
```

Add a default route.

```js
api.route("GET /", "src/get.handler")
api.route($default, "src/default.handler");
```

Add a parameterized route.

```js
api.route("GET /notes/{id}", "src/get.handler");
```

Add a greedy route.

```js
api.route("GET /notes/{proxy+}", "src/greedy.handler");
```

Enable auth for a route.

```js
api.route("GET /", "src/get.handler")
api.route("POST /", "src/post.handler", {
  auth: {
    iam: true
  }
});
```

Customize the route handler.

```js
api.route("GET /", {
  handler: "src/get.handler",
  memory: "2048 MB"
});
```
</Segment>

## ApiGatewayV2AuthorizerArgs
### jwt
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">audiences</code>](#jwt-audiences)</p>
- <p>[<code class="key">identitySource?</code>](#jwt-identitysource)</p>
- <p>[<code class="key">issuer</code>](#jwt-issuer)</p>
</Section>
Create a JWT or JSON Web Token authorizer that can be used by the routes.

You can configure JWT auth.

```js
{
  jwt: {
    issuer: "https://issuer.com/",
    audiences: ["https://api.example.com"],
    identitySource: "$request.header.AccessToken"
  }
}
```

You can also use Cognito as the identity provider.

```js
{
  jwt: {
    audiences: [userPoolClient.id],
    issuer: $interpolate`https://cognito-idp.${aws.getArnOutput(userPool).region}.amazonaws.com/${userPool.id}`,
  }
}
```

Where `userPool` and `userPoolClient` are:

```js
const userPool = new aws.cognito.UserPool();
const userPoolClient = new aws.cognito.UserPoolClient();
```
</Segment>
<NestedTitle id="jwt-audiences" Tag="h4" parent="jwt.">audiences</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
List of the intended recipients of the JWT. A valid JWT must provide an `aud` that matches at least one entry in this list.

</Segment>
<NestedTitle id="jwt-identitysource" Tag="h4" parent="jwt.">identitySource?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"$request.header.Authorization"</code>
</InlineSection>
Specifies where to extract the JWT from the request.

</Segment>
<NestedTitle id="jwt-issuer" Tag="h4" parent="jwt.">issuer</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Base domain of the identity provider that issues JSON Web Tokens.

</Segment>
### name
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code>
</InlineSection>
</Section>
The name of the authorizer.

```js
{
  name: "myAuthorizer",
}
```
</Segment>
### transform?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">authorizer?</code>](#transform-authorizer)</p>
</Section>
[Transform](/docs/components#transform) how this component creates its underlying
resources.

</Segment>
<NestedTitle id="transform-authorizer" Tag="h4" parent="transform.">authorizer?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">AuthorizerArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/authorizer/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">AuthorizerArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/authorizer/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the API Gateway authorizer resource.

</Segment>

## ApiGatewayV2RouteArgs
### auth?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">iam?</code>](#auth-iam)</p>
- <p>[<code class="key">jwt?</code>](#auth-jwt) <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code></p>
  - <p>[<code class="key">authorizer</code>](#auth-jwt-authorizer)</p>
  - <p>[<code class="key">scopes?</code>](#auth-jwt-scopes)</p>
</Section>
Enable auth for your HTTP API.

:::note
Currently IAM and JWT auth are supported.
:::

```js
{
  auth: {
    iam: true
  }
}
```
</Segment>
<NestedTitle id="auth-iam" Tag="h4" parent="auth.">iam?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">true</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Enable IAM authorization for a given API route. When IAM auth is enabled, clients need to use Signature Version 4 to sign their requests with their AWS credentials.

</Segment>
<NestedTitle id="auth-jwt" Tag="h4" parent="auth.">jwt?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Enable JWT or JSON Web Token authorization for a given API route. When JWT auth is enabled, clients need to include a valid JWT in their requests.

You can configure JWT auth.

```js
{
  auth: {
    jwt: {
      authorizer: myAuthorizer.id,
      scopes: ["read:profile", "write:profile"]
    }
  }
}
```

Where `myAuthorizer` is created by calling the `addAuthorizer` method.
</Segment>
<NestedTitle id="auth-jwt-authorizer" Tag="h5" parent="auth.jwt.">authorizer</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Authorizer ID of the JWT authorizer.

</Segment>
<NestedTitle id="auth-jwt-scopes" Tag="h5" parent="auth.jwt.">scopes?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Defines the permissions or access levels that the JWT grants. If the JWT does not have the required scope, the request is rejected. By default it does not require any scopes.

</Segment>
### transform?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">integration?</code>](#transform-integration)</p>
- <p>[<code class="key">route?</code>](#transform-route-1)</p>
</Section>
[Transform](/docs/components#transform) how this component creates its underlying
resources.

</Segment>
<NestedTitle id="transform-integration" Tag="h4" parent="transform.">integration?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">IntegrationArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/integration/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">IntegrationArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/integration/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the API Gateway HTTP API integration resource.

</Segment>
<NestedTitle id="transform-route-1" Tag="h4" parent="transform.">route?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">RouteArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/route/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">RouteArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/apigatewayv2/route/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the API Gateway HTTP API route resource.

</Segment>
</div>