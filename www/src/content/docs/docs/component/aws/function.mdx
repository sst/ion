---
title: Function
description: Reference doc for the `sst.aws.Function` component.
---

{/* DO NOT EDIT. AUTO-GENERATED FROM "platform/src/components/aws/function.ts" */}

import Segment from '../../../../../../src/components/tsdoc/Segment.astro';
import Section from '../../../../../../src/components/tsdoc/Section.astro';
import NestedTitle from '../../../../../../src/components/tsdoc/NestedTitle.astro';
import InlineSection from '../../../../../../src/components/tsdoc/InlineSection.astro';

<div class="tsdoc">

<Section type="about">
The `Function` component lets you add serverless functions to your app.
It uses [AWS Lambda](https://aws.amazon.com/lambda/).

:::note
Currently supports Node.js functions only. Support for other runtimes is on the roadmap.
:::

#### Minimal example

Pass in the path to your handler function.

```ts title="sst.config.ts"
new sst.aws.Function("MyFunction", {
  handler: "src/lambda.handler"
});
```

#### Set additional config

Pass in additional Lambda config.

```ts {3,4} title="sst.config.ts"
new sst.aws.Function("MyFunction", {
  handler: "src/lambda.handler",
  timeout: "3 minutes",
  memory: "1024 MB"
});
```

#### Link resources

[Link resources](/docs/linking/) to the function. This will grant permissions
to the resources and allow you to access it in your handler.

```ts {5} title="sst.config.ts"
const bucket = new sst.aws.Bucket("MyBucket");

new sst.aws.Function("MyFunction", {
  handler: "src/lambda.handler",
  link: [bucket]
});
```

You can use the [SDK](/docs/reference/sdk/) to access the linked resources
in your handler.

```ts title="src/lambda.ts"
import { Resource } from "sst";

console.log(Resource.MyBucket.name);
```

#### Set environment variables

Set environment variables for the function. Available in your handler as `process.env`.

```ts {4} title="sst.config.ts"
new sst.aws.Function("MyFunction", {
  handler: "src/lambda.handler",
  environment: {
    DEBUG: "true"
  }
});
```

#### Enable function URLs

Enable function URLs to invoke the function over HTTP.

```ts {3} title="sst.config.ts"
new sst.aws.Function("MyFunction", {
  handler: "src/lambda.handler",
  url: true
});
```

#### Bundling

Customize how SST uses [esbuild](https://esbuild.github.io/) to bundle your function code
with the `nodejs` property.

```ts title="sst.config.ts" {3-5}
new sst.aws.Function("MyFunction", {
  handler: "src/lambda.handler",
  nodejs: {
    install: ["pg"]
  }
});
```

Or override it entirely by passing in your own function `bundle`.
</Section>

---

## Constructor

<Segment>
<Section type="signature">
```ts
new Function(name, args, opts?)
```
</Section>

<Section type="parameters">
#### Parameters
- <p><code class="key">name</code> <code class="primitive">string</code></p>
- <p><code class="key">args</code> [<code class="type">FunctionArgs</code>](#functionargs)</p>
- <p><code class="key">opts?</code> [<code class="type">ComponentResourceOptions</code>](https://www.pulumi.com/docs/concepts/options/)</p>
</Section>
</Segment>

## FunctionArgs
### architecture?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">x86_64</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">arm64</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"x86_64"</code>
</InlineSection>
The [architecture](https://docs.aws.amazon.com/lambda/latest/dg/foundation-arch.html)
of the Lambda function.

```js
{
  architecture: "arm64"
}
```
</Segment>
### bundle?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Path to the source code directory for the function. By default, the handler is
bundled with [esbuild](https://esbuild.github.io/). Use `bundle` to skip bundling.

:::caution
Use `bundle` only when you want to bundle the function yourself.
:::

If the `bundle` option is specified, the `handler` needs to be in the root of the bundle.

Here, the entire `packages/functions/src` directory is zipped. And the handler is
in the `src` directory.

```js
{
  bundle: "packages/functions/src",
  handler: "index.handler"
}
```
</Segment>
### copyFiles?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">from</code>](#copyfiles-from)</p>
- <p>[<code class="key">to?</code>](#copyfiles-to)</p>
</Section>
Add additional files to copy into the function package. Takes a list of objects
with `from` and `to` paths. These will be copied over before the function package
is zipped up.

Copying over a single file from the `src` directory to the `src/` directory of the
function package.

```js
{
  copyFiles: [{ from: "src/index.js" }]
}
```

Copying over a single file from the `src` directory to the `core/src` directory in
the function package.

```js
{
  copyFiles: [{ from: "src/index.js", to: "core/src/index.js" }]
}
```

Copying over a couple of files.

```js
{
  copyFiles: [
    { from: "src/this.js", to: "core/src/this.js" },
    { from: "src/that.js", to: "core/src/that.js" }
  ]
}
```
</Segment>
<NestedTitle id="copyfiles-from" Tag="h4" parent="copyFiles[].">from</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Source path relative to the `sst.config.ts`.

</Segment>
<NestedTitle id="copyfiles-to" Tag="h4" parent="copyFiles[].">to?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** The `from` path in the function package
</InlineSection>
Destination path relative to function root in the package. By default, it
creates the same directory structure as the `from` path and copies the file.

</Segment>
### description?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
A description for the function. This is displayed in the AWS Console.

```js
{
  description: "Handler function for my nightly cron job."
}
```
</Segment>
### environment?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Record</code><code class="symbol">&lt;</code><code class="primitive">string</code>, <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">&gt;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Key-value pairs of values that are set as [Lambda environment variables](https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html).
The keys need to:
- Start with a letter
- Be at least 2 characters long
- Contain only letters, numbers, or underscores

They can be accessed in your function using `process.env.<key>`.

:::note
The total size of the environment variables cannot exceed 4 KB.
:::

```js
{
  environment: {
    DEBUG: "true"
  }
}
```
</Segment>
### handler
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Path to the handler for the function with the format `{file}.{method}`.

:::note
You don't need to specify the file extension.
:::

The handler path is relative to the root your repo or the `sst.config.ts`.

Here there is a file called `index.js` (or `.ts`) in the `packages/functions/src/`
directory with an exported method called `handler`.

```js
{
  handler: "packages/functions/src/index.handler"
}
```

If `bundle` is specified, the handler needs to be in the root of the bundle directory.

```js
{
  bundle: "packages/functions/src",
  handler: "index.handler"
}
```
</Segment>
### layers?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
A list of Lambda layer ARNs to add to the function.

```js
{
  layers: ["arn:aws:lambda:us-east-1:123456789012:layer:my-layer:1"]
}
```
</Segment>
### link?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">any</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
[Link resources](/docs/linking/) to your function. This will:

1. Grant the permissions needed to access the resources.
2. Allow you to access it in your site using the [SDK](/docs/reference/sdk/).

Takes a list of components to link to the function.

```js
{
  link: [bucket, stripeKey]
}
```
</Segment>
### live?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">false</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">true</code>
</InlineSection>
Disable running this function [Live](/docs/live/) in `sst dev`.

```js
{
  live: false
}
```
</Segment>
### logging?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">retention?</code>](#logging-retention)</p>
</Section>

<InlineSection>
**Default** <code class="primitive">&lcub;retention: "forever"&rcub;</code>
</InlineSection>
Configure the function logs in CloudWatch.

```js
{
  logging: {
    retention: "1 week"
  }
}
```
</Segment>
<NestedTitle id="logging-retention" Tag="h4" parent="logging.">retention?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">1 day</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">3 days</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">5 days</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">1 week</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">2 weeks</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">1 month</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">2 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">3 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">4 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">5 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">6 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">1 year</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">13 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">18 months</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">2 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">3 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">5 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">6 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">7 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">8 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">9 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">10 years</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">forever</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">forever</code>
</InlineSection>
The duration the function logs are kept in CloudWatch.

</Segment>
### memory?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} MB</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} GB</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"1024 MB"</code>
</InlineSection>
The amount of memory allocated for the function. Takes values between 128 MB
and 10240 MB in 1 MB increments.  The amount of memory affects the amount of
virtual CPU available to the function.

:::tip
While functions with less memory are cheaper, larger functions can process faster.
And might end up being more [cost effective](https://docs.aws.amazon.com/lambda/latest/operatorguide/computing-power.html).
:::

```js
{
  memory: "10240 MB"
}
```
</Segment>
### nodejs?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">banner?</code>](#nodejs-banner)</p>
- <p>[<code class="key">esbuild?</code>](#nodejs-esbuild)</p>
- <p>[<code class="key">format?</code>](#nodejs-format)</p>
- <p>[<code class="key">install?</code>](#nodejs-install)</p>
- <p>[<code class="key">loader?</code>](#nodejs-loader)</p>
- <p>[<code class="key">minify?</code>](#nodejs-minify)</p>
- <p>[<code class="key">sourcemap?</code>](#nodejs-sourcemap)</p>
- <p>[<code class="key">splitting?</code>](#nodejs-splitting)</p>
</Section>
Configure how your function is bundled.

By default, SST will bundle your function
code using [esbuild](https://esbuild.github.io/). This tree shakes your code to
only include what's used; reducing the size of your function package and improving
cold starts.

</Segment>
<NestedTitle id="nodejs-banner" Tag="h4" parent="nodejs.">banner?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Use this to insert a string at the beginning of the generated JS file.

```js
{
  nodejs: {
    banner: "console.log('Function starting')"
  }
}
```
</Segment>
<NestedTitle id="nodejs-esbuild" Tag="h4" parent="nodejs.">esbuild?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code>[<code class="type">BuildOptions</code>](https://esbuild.github.io/api/#build)<code class="symbol">&gt;</code>
</InlineSection>
</Section>
This allows you to customize esbuild config that is used.

:::tip
Check out the _JS tab_ in the code snippets in the esbuild docs for the
[`BuildOptions`](https://esbuild.github.io/api/#build).
:::

</Segment>
<NestedTitle id="nodejs-format" Tag="h4" parent="nodejs.">format?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">cjs</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">esm</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"esm"</code>
</InlineSection>
Configure the format of the generated JS code; ESM or CommonJS.

```js
{
  nodejs: {
    format: "cjs"
  }
}
```
</Segment>
<NestedTitle id="nodejs-install" Tag="h4" parent="nodejs.">install?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Dependencies that need to be excluded from the function package.

Certain npm packages cannot be bundled using esbuild. This allows you to exclude them
from the bundle. Instead they'll be moved into a `node_modules/` directory in the
function package.

:::tip
If esbuild is giving you an error about a package, try adding it to the `install` list.
:::

This will allow your functions to be able to use these dependencies when deployed. They
just won't be tree shaken. You however still need to have them in your `package.json`.

:::caution
Packages listed here still need to be in your `package.json`.
:::

Esbuild will ignore them while traversing the imports in your code. So these are the
**package names as seen in the imports**. It also works on packages that are not directly
imported by your code.

```js
{
  nodejs: {
    install: ["pg"]
  }
}
```
</Segment>
<NestedTitle id="nodejs-loader" Tag="h4" parent="nodejs.">loader?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Record</code><code class="symbol">&lt;</code><code class="primitive">string</code>, [<code class="type">Loader</code>](https://esbuild.github.io/api/#loader)<code class="symbol">&gt;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Configure additional esbuild loaders for other file extensions. This is useful
when your code is importing non-JS files like `.png`, `.css`, etc.

```js
{
  nodejs: {
    loader: {
     ".png": "file"
    }
  }
}
```
</Segment>
<NestedTitle id="nodejs-minify" Tag="h4" parent="nodejs.">minify?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">boolean</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">true</code>
</InlineSection>
Disable if the function code is minified when bundled.

```js
{
  nodejs: {
    minify: false
  }
}
```
</Segment>
<NestedTitle id="nodejs-sourcemap" Tag="h4" parent="nodejs.">sourcemap?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">boolean</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">false</code>
</InlineSection>
Configure if source maps are added to the function bundle when **deployed**. Since they
increase payload size and potentially cold starts, they are not added by default.
However, they are always generated during `sst dev`.

:::tip[SST Console]
For the [Console](/docs/console/), source maps are always generated and uploaded
to your bootstrap bucket. These are then downloaded and used to display
Issues in the console.
:::

```js
{
  nodejs: {
    sourcemap: true
  }
}
```
</Segment>
<NestedTitle id="nodejs-splitting" Tag="h4" parent="nodejs.">splitting?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">boolean</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">false</code>
</InlineSection>
If enabled, modules that are dynamically imported will be bundled in their own files
with common dependencies placed in shared chunks. This can help reduce cold starts
as your function grows in size.

```js
{
  nodejs: {
    splitting: true
  }
}
```
</Segment>
### permissions?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">actions</code>](#permissions-actions)</p>
- <p>[<code class="key">resources</code>](#permissions-resources)</p>
</Section>
Permissions and the resources that the function needs to access. These permissions are
used to create the function's IAM role.

:::tip
If you `link` the function to a resource, the permissions to access it are
automatically added.
:::

Allow the function to read and write to an S3 bucket called `my-bucket`.
```js
{
  permissions: [
    {
      actions: ["s3:GetObject", "s3:PutObject"],
      resources: ["arn:aws:s3:::my-bucket/*"]
    },
  ]
}
```

Allow the function to perform all actions on an S3 bucket called `my-bucket`.

```js
{
  permissions: [
    {
      actions: ["s3:*"],
      resources: ["arn:aws:s3:::my-bucket/*"]
    },
  ]
}
```

Granting the function permissions to access all resources.

```js
{
  permissions: [
    {
      actions: ["*"],
      resources: ["*"]
    },
  ]
}
```
</Segment>
<NestedTitle id="permissions-actions" Tag="h4" parent="permissions[].">actions</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code><code class="symbol">[]</code>
</InlineSection>
</Section>
The [IAM actions](https://docs.aws.amazon.com/service-authorization/latest/reference/reference_policies_actions-resources-contextkeys.html#actions_table) that can be performed.

```js
{
  actions: ["s3:*"]
}
```
</Segment>
<NestedTitle id="permissions-resources" Tag="h4" parent="permissions[].">resources</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code>
</InlineSection>
</Section>
The resourcess specified using the [IAM ARN format](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_identifiers.html).

```js
{
  resources: ["arn:aws:s3:::my-bucket/*"]
}
```
</Segment>
### role?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** Creates a new role
</InlineSection>
Assigns the given IAM role ARN to the function. This allows you to pass in a previously created role.

:::caution
When you pass in a role, the function will not update it if you add `permissions` or `link` resources.
:::

By default, the function creates a new IAM role when it's created. It'll update this role if you add `permissions` or `link` resources.

However, if you pass in a role, you'll need to update it manually if you add `permissions` or `link` resources.

```js
{
  role: "arn:aws:iam::123456789012:role/my-role"
}
```
</Segment>
### runtime?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">nodejs18.x</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">nodejs20.x</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">provided.al2023</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"nodejs20.x"</code>
</InlineSection>
The runtime environment for the function. Support for other runtimes is on our roadmap.

```js
{
  runtime: "nodejs18.x"
}
```
</Segment>
### streaming?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">boolean</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">false</code>
</InlineSection>
Enable streaming for the function. Stream is only supported when using the function
`url` and not when using it with API Gateway.

:::tip
You'll need to [wrap your handler](https://docs.aws.amazon.com/lambda/latest/dg/configuration-response-streaming.html) with `awslambda.streamifyResponse()` to enable streaming.
:::

```js
{
  streaming: true
}
```
</Segment>
### timeout?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} minute</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} minutes</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} second</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} seconds</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"20 seconds"</code>
</InlineSection>
The maximum amount of time the function can run. The minimum timeout is 1 second and the maximum is 900 seconds or 15 minutes.

:::note
If a function is connected to another service, the request will time out based on the service's limits.
:::

While the maximum timeout is 15 minutes, if a function is connected to other services, it'll time out based on those limits. API Gateway for example has a timeout of 30 seconds. So even if the function has a timeout of 15 minutes, the API request will time out after 30 seconds.

```js
{
  timeout: "900 seconds"
}
```
</Segment>
### transform?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">function?</code>](#transform-function)</p>
- <p>[<code class="key">logGroup?</code>](#transform-loggroup)</p>
- <p>[<code class="key">role?</code>](#transform-role)</p>
</Section>
[Transform](/docs/components#transform) how this component creates its underlying
resources.

</Segment>
<NestedTitle id="transform-function" Tag="h4" parent="transform.">function?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">FunctionArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/lambda/function/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">FunctionArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/lambda/function/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the Lambda Function resource.

</Segment>
<NestedTitle id="transform-loggroup" Tag="h4" parent="transform.">logGroup?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">LogGroupArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cloudwatch/loggroup/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">LogGroupArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cloudwatch/loggroup/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the CloudWatch LogGroup resource.

</Segment>
<NestedTitle id="transform-role" Tag="h4" parent="transform.">role?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">RoleArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/iam/role/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">RoleArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/iam/role/#inputs)<code class="symbol"> => </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the IAM Role resource.

</Segment>
### url?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">boolean</code><code class="symbol"> | </code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">authorization?</code>](#url-authorization)</p>
- <p>[<code class="key">cors?</code>](#url-cors) <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">boolean</code><code class="symbol"> | </code><code class="primitive">Object</code><code class="symbol">&gt;</code></p>
  - <p>[<code class="key">allowCredentials?</code>](#url-cors-allowcredentials)</p>
  - <p>[<code class="key">allowHeaders?</code>](#url-cors-allowheaders)</p>
  - <p>[<code class="key">allowMethods?</code>](#url-cors-allowmethods)</p>
  - <p>[<code class="key">allowOrigins?</code>](#url-cors-alloworigins)</p>
  - <p>[<code class="key">exposeHeaders?</code>](#url-cors-exposeheaders)</p>
  - <p>[<code class="key">maxAge?</code>](#url-cors-maxage)</p>
</Section>

<InlineSection>
**Default** <code class="primitive">false</code>
</InlineSection>
Enable [Lambda function URLs](https://docs.aws.amazon.com/lambda/latest/dg/lambda-urls.html).
These are dedicated endpoints for your Lambda functions.

Enable it with the default options.
```js
{
  url: true
}
```

Configure the authorization and CORS settings for the endpoint.
```js
{
  url: {
    authorization: "iam",
    cors: {
      allowOrigins: ['https://example.com']
    }
  }
}
```
</Segment>
<NestedTitle id="url-authorization" Tag="h4" parent="url.">authorization?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">none</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">iam</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"none"</code>
</InlineSection>
The authorization used for the function URL. Supports [IAM authorization](https://docs.aws.amazon.com/lambda/latest/dg/urls-auth.html).

```js
{
  url: {
    authorization: "iam"
  }
}
```
</Segment>
<NestedTitle id="url-cors" Tag="h4" parent="url.">cors?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">boolean</code><code class="symbol"> | </code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">true</code>
</InlineSection>
Customize the CORS (Cross-origin resource sharing) settings for the function URL.

Disable CORS.
```js
{
  url: {
    cors: true
  }
}
```
Only enable the `GET` and `POST` methods for `https://example.com`.
```js
{
  url: {
    cors: {
      allowMethods: ["GET", "POST"],
      allowOrigins: ["https://example.com"]
    }
  }
}
```
</Segment>
<NestedTitle id="url-cors-allowcredentials" Tag="h5" parent="url.cors.">allowCredentials?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">boolean</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">false</code>
</InlineSection>
Allow cookies or other credentials in requests to the function URL.

```js
{
  url: {
    cors: {
      allowCredentials: true
    }
  }
}
```
</Segment>
<NestedTitle id="url-cors-allowheaders" Tag="h5" parent="url.cors.">allowHeaders?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">["*"]</code>
</InlineSection>
The HTTP headers that origins can include in requests to the function URL.

```js
{
  url: {
    cors: {
      allowHeaders: ["date", "keep-alive", "x-custom-header"]
    }
  }
}
```
</Segment>
<NestedTitle id="url-cors-allowmethods" Tag="h5" parent="url.cors.">allowMethods?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">DELETE</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">GET</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">HEAD</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">OPTIONS</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">PATCH</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">POST</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">PUT</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">\*</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">["*"]</code>
</InlineSection>
The HTTP methods that are allowed when calling the function URL.

```js
{
  url: {
    cors: {
      allowMethods: ["GET", "POST", "DELETE"]
    }
  }
}
```
Or the wildcard for all methods.
```js
{
  url: {
    cors: {
      allowMethods: ["*"]
    }
  }
}
```
</Segment>
<NestedTitle id="url-cors-alloworigins" Tag="h5" parent="url.cors.">allowOrigins?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">["*"]</code>
</InlineSection>
The origins that can access the function URL.

```js
{
  url: {
    cors: {
      allowOrigins: ["https://www.example.com", "http://localhost:60905"]
    }
  }
}
```
Or the wildcard for all origins.
```js
{
  url: {
    cors: {
      allowOrigins: ["*"]
    }
  }
}
```
</Segment>
<NestedTitle id="url-cors-exposeheaders" Tag="h5" parent="url.cors.">exposeHeaders?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">[]</code>
</InlineSection>
The HTTP headers you want to expose in your function to an origin that calls the function URL.

```js
{
  url: {
    cors: {
      exposeHeaders: ["date", "keep-alive", "x-custom-header"]
    }
  }
}
```
</Segment>
<NestedTitle id="url-cors-maxage" Tag="h5" parent="url.cors.">maxAge?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} minute</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} minutes</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} hour</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} hours</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} second</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} seconds</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} day</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} days</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"0 seconds"</code>
</InlineSection>
The maximum amount of time the browser can cache results of a preflight request. By
default the browser doesn't cache the results. The maximum value is `86400 seconds` or `1 day`.

```js
{
  url: {
    cors: {
      maxAge: "1 day"
    }
  }
}
```
</Segment>
### vpc?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">securityGroups</code>](#vpc-securitygroups)</p>
- <p>[<code class="key">subnets</code>](#vpc-subnets)</p>
</Section>
Configure the function to connect to private subnets in a virtual private cloud or VPC. This allows your function to access private resources.

```js
{
  vpc: {
    securityGroups: ["sg-0399348378a4c256c"],
    subnets: ["subnet-0b6a2b73896dc8c4c", "subnet-021389ebee680c2f0"]
  }
}
```
</Segment>
<NestedTitle id="vpc-securitygroups" Tag="h4" parent="vpc.">securityGroups</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
A list of VPC security group IDs.

</Segment>
<NestedTitle id="vpc-subnets" Tag="h4" parent="vpc.">subnets</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
A list of VPC subnet IDs.

</Segment>

## Properties

### arn
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Output</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The ARN of the Lambda function.
</Segment>

### name
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Output</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The name of the Lambda function.
</Segment>

### nodes
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">function</code>](#nodes-function)</p>
- <p>[<code class="key">logGroup</code>](#nodes-loggroup)</p>
- <p>[<code class="key">role</code>](#nodes-role)</p>
</Section>
The underlying [resources](/docs/components/#nodes) this component creates.
</Segment>
<NestedTitle id="nodes-function" Tag="h4" parent="nodes.">function</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Output</code><code class="symbol">&lt;</code>[<code class="type">Function</code>](https://www.pulumi.com/registry/packages/aws/api-docs/lambda/function/)<code class="symbol">&gt;</code>
</InlineSection>
</Section>
The AWS Lambda function.
</Segment>
<NestedTitle id="nodes-loggroup" Tag="h4" parent="nodes.">logGroup</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">LogGroup</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cloudwatch/loggroup/)
</InlineSection>
</Section>
The CloudWatch Log Group the function logs are stored.
</Segment>
<NestedTitle id="nodes-role" Tag="h4" parent="nodes.">role</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">Role</code>](https://www.pulumi.com/registry/packages/aws/api-docs/iam/role/)
</InlineSection>
</Section>
The IAM Role the function will use.
</Segment>

### url
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Output</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The Lambda function URL if `url` is enabled.
</Segment>

## SDK

Use the [SDK](/docs/reference/sdk/) in your runtime to interact with your infrastructure.

---

### Links
This is accessible through the `Resource` object in the [SDK](/docs/reference/sdk/#links).
<Segment>
<Section type="parameters">
- <p><code class="key">name</code> <code class="primitive">string</code></p>

  The name of the Lambda function.
- <p><code class="key">url</code> <code class="primitive">undefined</code><code class="symbol"> | </code><code class="primitive">string</code></p>

  The Lambda function URL if `url` is enabled.
</Section>
</Segment>
</div>